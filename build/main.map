{"version":3,"sources":["webpack:///webpack/bootstrap e95380b281662a564c7d","webpack:///external \"express\"","webpack:///external \"body-parser\"","webpack:///external \"mongoose\"","webpack:///./src/user/User.js","webpack:///./src/index.js","webpack:///external \"path\"","webpack:///external \"serve-favicon\"","webpack:///external \"morgan\"","webpack:///external \"cookie-parser\"","webpack:///./src/routes/index.js","webpack:///./src/routes/users.js","webpack:///external \"http\"","webpack:///external \"socket.io\"","webpack:///./src/db/db.js","webpack:///./src/user/UserController.js","webpack:///./src/auth/AuthController.js","webpack:///external \"jsonwebtoken\"","webpack:///external \"bcryptjs\"","webpack:///./src/config.js"],"names":["mongoose","require","UserSchema","Schema","name","String","email","password","role","model","module","exports","express","path","favicon","logger","cookieParser","bodyParser","index","users","app","http","Server","io","db","UserController","AuthController","activeUsers","Array","use","get","req","res","sendFile","__dirname","on","socket","token","handshake","query","console","log","push","emit","filter","user","broadcast","msg","listen","router","Router","next","send","connect","urlencoded","extended","json","User","post","create","body","err","status","find","findById","params","id","delete","findByIdAndRemove","put","findByIdAndUpdate","new","jwt","bcrypt","config","findOne","person","isValidated","compareSync","sign","secret","error","hashedPassword","hashSync","_id","expiresIn","auth","headers","message","verify","decoded"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e95380b281662a564c7d","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 2\n// module chunks = 0","var mongoose = require('mongoose');\n\nvar UserSchema = new mongoose.Schema({\n    name: String,\n    email: String,\n    password: String,\n    role: String\n});\nmongoose.model('User', UserSchema);\n\n\nmodule.exports = mongoose.model('User');\n\n\n// WEBPACK FOOTER //\n// ./src/user/User.js","var express = require('express');\nvar path = require('path');\nvar favicon = require('serve-favicon');\nvar logger = require('morgan');\nvar cookieParser = require('cookie-parser');\nvar bodyParser = require('body-parser');\n\nvar index = require('./routes/index');\nvar users = require('./routes/users');\n\nvar app = express();\n\nvar http = require('http').Server(app);\nvar io = require('socket.io')(http);\n\nvar db = require('./db/db');\nvar UserController = require('./user/UserController');\nvar AuthController = require('./auth/AuthController');\n\nlet activeUsers = new Array();\n\napp.use('/api/auth', AuthController);\napp.use('/users', UserController);\n\napp.get('/', function(req, res){\n    res.sendFile(__dirname + '/routes/chat.html');\n});\n\n\nio.on('connection', (socket) => {\n    const token = socket.handshake.query.token;\n    console.log(this.activeUsers);\n\n    this.activeUsers =  (this.activeUsers) ? this.activeUsers : new Array();\n    if (token) {\n        console.log('a user connected = ', socket.handshake.query.token);\n\n        this.activeUsers.push(token);\n        console.log('emitting ', this.activeUsers);\n        io.emit('users', this.activeUsers);\n    }\n\n    socket.on('disconnect', () => {\n        const token = socket.handshake.query.token;\n\n        if (token) {\n            console.log('a user disconected = ', socket.handshake.query.token);\n            this.activeUsers = this.activeUsers.filter(user => user !== token);\n            console.log('emitting ', this.activeUsers);\n            io.emit('users', this.activeUsers);\n        }\n    });\n\n    io.on('connection', (socket) => {\n        socket.broadcast.emit('hi');\n    });\n\n    socket.on('chat message', (msg) => {\n        io.emit('chat message', msg);\n    });\n});\n\nhttp.listen(3001, function(){\n    console.log('listening on *:3001');\n});\n\n\nmodule.exports = app;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"serve-favicon\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"serve-favicon\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"morgan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"morgan\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 9\n// module chunks = 0","var express = require('express');\nvar router = express.Router();\n/* GET home page. */\n\nmodule.exports = router;\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/index.js","var express = require('express');\nvar router = express.Router();\n\n/* GET users listing. */\nrouter.get('/', function(req, res, next) {\n  res.send('respond with a resource');\n});\n\nmodule.exports = router;\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/users.js","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"socket.io\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"socket.io\"\n// module id = 13\n// module chunks = 0","\nvar mongoose = require('mongoose');\nmongoose.connect('mongodb://localhost:27017/medical-chat');\n\n\n// WEBPACK FOOTER //\n// ./src/db/db.js","var express = require('express');\nvar router = express.Router();\nvar bodyParser = require('body-parser');\n\nrouter.use(bodyParser.urlencoded({ extended: true }));\nrouter.use(bodyParser.json());\nvar User = require('./User');\n\n// CREATES A NEW USER\nrouter.post('/', function (req, res) {\n    User.create({\n            name : req.body.name,\n            email : req.body.email,\n            password : req.body.password\n        },\n        function (err, user) {\n            if (err) return res.status(500).send(\"There was a problem adding the information to the database.\");\n            res.status(200).send(user);\n        });\n});\n\n// RETURNS ALL THE USERS IN THE DATABASE\nrouter.get('/', function (req, res) {\n    User.find({}, function (err, users) {\n        if (err) return res.status(500).send(\"There was a problem finding the users.\");\n        res.status(200).send(users);\n    });\n});\n\n// GETS A SINGLE USER FROM THE DATABASE\nrouter.get('/:id', function (req, res) {\n    User.findById(req.params.id, function (err, user) {\n        if (err) return res.status(500).send(\"There was a problem finding the user.\");\n        if (!user) return res.status(404).send(\"No user found.\");\n        res.status(200).send(user);\n    });\n});\n\n// DELETES A USER FROM THE DATABASE\nrouter.delete('/:id', function (req, res) {\n    User.findByIdAndRemove(req.params.id, function (err, user) {\n        if (err) return res.status(500).send(\"There was a problem deleting the user.\");\n        res.status(200).send(\"User: \"+ user.name +\" was deleted.\");\n    });\n});\n\n// UPDATES A SINGLE USER IN THE DATABASE\nrouter.put('/:id', function (req, res) {\n    User.findByIdAndUpdate(req.params.id, req.body, {new: true}, function (err, user) {\n        if (err) return res.status(500).send(\"There was a problem updating the user.\");\n        res.status(200).send(user);\n    });\n});\n\n\nmodule.exports = router;\n\n\n// WEBPACK FOOTER //\n// ./src/user/UserController.js","/**\n * Created by sevcik on 5/9/18.\n */\nvar express = require('express');\nvar router = express.Router();\nvar bodyParser = require('body-parser');\nrouter.use(bodyParser.urlencoded({ extended: false }));\nrouter.use(bodyParser.json());\nvar User = require('../user/User');\n\nvar jwt = require('jsonwebtoken');\nvar bcrypt = require('bcryptjs');\nvar config = require('../config');\n\nrouter.post('/login', function(req, res) {\n    User.findOne({email:req.body.email}, function(err, person) {\n        if (person) {\n            var isValidated = bcrypt.compareSync(req.body.password, person.password);\n\n            if (isValidated) {\n                console.log(person);\n                var token = jwt.sign({name: person.name, role: person.role, email: person.email}, config.secret);\n                const {role} = person;\n                return res.status(200).send(\n                    {\n                        token: token,\n                        role: role\n                    });\n            }\n        }\n        return res.status(404).send({error: 'Bad username/password'})\n    })\n});\n\nrouter.post('/register', function(req, res) {\n\n    var hashedPassword = bcrypt.hashSync(req.body.password, 8);\n\n    console.log('creating user: ', hashedPassword);\n    User.create({\n            name : req.body.name,\n            email : req.body.email,\n            password : hashedPassword,\n            role: req.body.role\n        },\n        function (err, user) {\n            if (err) return res.status(500).send(\"There was a problem registering the user.\")\n\n            // create a token\n            var token = jwt.sign({ id: user._id }, config.secret, {\n                expiresIn: 86400 // expires in 24 hours\n            });\n\n            res.status(200).send({ auth: true, token: token });\n        });\n});\n\nrouter.get('/me', function(req, res) {\n\n    var token = req.headers['x-access-token'];\n    console.log(token);\n    if (!token) return res.status(401).send({ auth: false, message: 'No token provided.' });\n\n    jwt.verify(token, config.secret, function(err, decoded) {\n        if (err) return res.status(500).send({ auth: false, message: 'Failed to authenticate token.' });\n\n        res.status(200).send(decoded);\n    });\n});\n\nmodule.exports = router;\n\n\n// WEBPACK FOOTER //\n// ./src/auth/AuthController.js","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"bcryptjs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcryptjs\"\n// module id = 18\n// module chunks = 0","module.exports = {\n    'secret': 'supersecret'\n};\n\n\n// WEBPACK FOOTER //\n// ./src/config.js"],"sourceRoot":""}